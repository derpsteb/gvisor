# v2.45.1
FROM alpine/git@sha256:4d7fe8d770483993c0cec264d49a573bac49e5239db47a9846572352e72da49c as downloader
RUN git clone https://github.com/vllm-project/vllm.git /vllm && cd /vllm && git checkout v0.4.2

# v0.4.2
FROM vllm/vllm-openai@sha256:c63bd9e99c6d5914032b396be38a80fd9640693da62b64b907434d38bf38a8e9
COPY --from=downloader /vllm/examples/template_chatml.jinja /vllm/examples/template_chatml.jinja
COPY --from=downloader /vllm/benchmarks /vllm/benchmarks

ENTRYPOINT ["python3"]
CMD ["-m", "vllm.entrypoints.openai.api_server", "--model", "/facebook/opt-125m", "--chat-template", "/vllm/examples/template_chatml.jinja"]
